<Window x:Class="SpeechToTextTray.UI.Windows.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:controls="clr-namespace:SpeechToTextTray.UI.Controls"
        Title="Speech-to-Text Settings"
        Height="500" Width="550"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        Background="#F0F0F0">

    <Window.Resources>
        <Style TargetType="Label">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Margin" Value="0,15,0,5"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Height" Value="30"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Padding" Value="5"/>
            <Setter Property="Height" Value="30"/>
        </Style>
        <Style TargetType="CheckBox">
            <Setter Property="Margin" Value="0,5,0,0"/>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Settings Content -->
        <ScrollViewer Grid.Row="0" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Hotkey Section -->
                <Label Content="Recording Hotkey:" FontSize="14"/>
                <controls:HotkeyTextBox x:Name="hotkeyInput" Height="30"/>
                <TextBlock Text="Press a key combination to set the hotkey (requires at least one modifier key)"
                           Foreground="Gray"
                           FontSize="10"
                           Margin="0,3,0,0"
                           TextWrapping="Wrap"/>

                <!-- Audio Device Section -->
                <Label Content="Microphone:" FontSize="14" Margin="0,20,0,5"/>
                <ComboBox x:Name="audioDeviceCombo"
                          DisplayMemberPath="Name"
                          SelectedValuePath="Id"/>
                <TextBlock Text="Select the audio input device for recording"
                           Foreground="Gray"
                           FontSize="10"
                           Margin="0,3,0,0"/>

                <!-- Backend URL Section -->
                <Label Content="Backend Server URL:" FontSize="14" Margin="0,20,0,5"/>
                <DockPanel>
                    <Button Content="Test"
                            Width="60"
                            Height="30"
                            Margin="5,0,0,0"
                            DockPanel.Dock="Right"
                            Click="TestBackend_Click"/>
                    <TextBox x:Name="backendUrlInput"
                             Text="http://localhost:8000"
                             VerticalContentAlignment="Center"/>
                </DockPanel>
                <TextBlock x:Name="backendStatusText"
                           Foreground="Gray"
                           FontSize="10"
                           Margin="0,3,0,0"
                           Text="Ensure the backend server is running"/>

                <!-- Options Section -->
                <Label Content="Options:" FontSize="14" Margin="0,20,0,5"/>
                <CheckBox x:Name="startWithWindowsCheck"
                          Content="Start with Windows"/>
                <CheckBox x:Name="showNotificationsCheck"
                          Content="Show notifications"/>
                <CheckBox x:Name="injectTextCheck"
                          Content="Automatically inject text into active window"/>
                <CheckBox x:Name="fallbackClipboardCheck"
                          Content="Fallback to clipboard if text injection fails"
                          Margin="20,5,0,0"/>
                <CheckBox x:Name="playSoundsCheck"
                          Content="Play sound effects"/>

                <!-- Timeout Section -->
                <Label Content="API Timeout (seconds):" FontSize="14" Margin="0,20,0,5"/>
                <TextBox x:Name="timeoutInput"
                         Text="120"
                         PreviewTextInput="NumberValidation"
                         VerticalContentAlignment="Center"/>
            </StackPanel>
        </ScrollViewer>

        <!-- Buttons -->
        <StackPanel Grid.Row="1"
                   Orientation="Horizontal"
                   HorizontalAlignment="Right"
                   Margin="0,20,0,0">
            <Button Content="Reset to Defaults"
                    Width="120"
                    Height="35"
                    Margin="0,0,10,0"
                    Click="Reset_Click"/>
            <Button Content="Cancel"
                    Width="80"
                    Height="35"
                    Margin="0,0,10,0"
                    Click="Cancel_Click"/>
            <Button Content="Save"
                    Width="80"
                    Height="35"
                    IsDefault="True"
                    Background="#0078D4"
                    Foreground="White"
                    Click="Save_Click"/>
        </StackPanel>
    </Grid>
</Window>
